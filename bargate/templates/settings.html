<div class="modal" id="prefs-m" tabindex="-1" style="overflow: scroll">
	<div class="modal-dialog modal-lg">
		<div class="modal-content" style="min-height: 600px">
			<div class="modal-header mhc">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fas fa-fw fa-times"></i></button>
				<!--<div class="pull-right"><button data-dismiss="modal" class="btn btn-sm btn-primary">Close</button></div>-->
				<h4 class="modal-title visible-xs">Settings</h4>
				<ul class="nav nav-pills hidden-xs" role="tablist" style="font-size: 1.2em">
					<li role="presentation" class="active"><a href="#fopts" aria-controls="fopts" role="tab" data-toggle="tab">Folder options</a></li>
					<li role="presentation"><a href="#uploadprefs" aria-controls="uploadprefs" role="tab" data-toggle="tab">Uploads</a></li>
					<li role="presentation"><a href="#theme" aria-controls="theme" role="tab" data-toggle="tab">Theme</a></li>
					{% if config.TOTP_ENABLED %}<li role="presentation"><a href="#2step" aria-controls="theme" role="tab" data-toggle="tab">Two-step verification</a></li>{%endif%}
				</ul>
			</div>
			<div class="modal-body">
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="fopts">
						<form>
							<div class="prefshF">Layout mode</div>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-layout-i" id="prefs-layout-grid" value="grid"> View folder contents as a grid of icons
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-layout-i" id="prefs-layout-list" value="list"> View folder contents as list
								</label>
							</div>

							<div class="prefsh">Hidden files</div>
							<div class="checkbox">
								<label>
									<input id="prefs-hidden" name="prefs-hidden-i" type="checkbox" value="show">
									Show hidden files and folders
								</label>
							</div>

							<div class="prefsh">On file click</div>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-click-i" id="prefs-click-ask" value="ask">
									Open file details <span class="text-muted hidden-xs">(Recommended)</span>
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-click-i" id="prefs-click-default" value="default">
									View or download files when clicked without prompting
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-click-i" id="prefs-click-download" value="download">
									Download files when clicked without prompting
								</label>
							</div>
						</form>
					</div>
					<div role="tabpanel" class="tab-pane" id="uploadprefs">
						<div class="prefshS">Overwrite on upload</div>
						<form>
							<div class="checkbox">
								<label>
									<input id="prefs-overwrite" name="prefs-overwrite" type="checkbox">
									Allow overwriting an existing file when uploading if the filename matches
								</label>
							</div>
						</form>
					</div>
					<div role="tabpanel" class="tab-pane" id="theme">
						<div class="prefshS visible-xs">Theme</div>
						<form>
							<div class="radio">
								<label>
									<input type="radio" name="prefs-theme-i" id="prefs-theme-lumen" value="lumen">
									Lumen
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-cerulean" value="cerulean">
								Cerulean
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-cosmo" value="cosmo">
								Cosmo
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-cyborg" value="cyborg">
								Cyborg
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-journal" value="journal">
								Journal
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-flatly" value="flatly">
								Flatly
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-sandstone" value="sandstone">
								Sandstone
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-paper" value="paper" checked="">
								Paper
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-readable" value="readable">
								Readable
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-simplex" value="simplex">
								Simplex
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-spacelab" value="spacelab">
								Spacelab
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-united" value="united">
								United
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-darkly" value="darkly">
								Darkly
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-slate" value="slate">
								Slate
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-yeti" value="yeti">
								Yeti
								</label>
							</div>
							<div class="radio">
								<label>
								<input type="radio" name="prefs-theme-i" id="prefs-theme-solar" value="solar">
								Solar
								</label>
							</div>
						</form>
					</div>
					{% if config.TOTP_ENABLED %}
					<div role="tabpanel" class="tab-pane hidden-xs" id="2step">
						<div class="twoStepEnabled hidden">
							<div style="font-size: 1.5em; margin-left: 25px;" class="pull-right label label-success">
							<span class="fas fa-fw fa-2x fa-check"></span> <div class="btn-label">Enabled</div>
							</div>
							<div class="prefshS">Status</div>
							<p>Your account is currently protected by two-step verification. When logging in 
							you must enter a unique passcode, generated by an app on your mobile device, in 
							addition to your username and password.
							</p>
							<div class="prefsh">Trusted Device</div>
							<p class="twoStepTrusted hidden">This device is currently trusted and so you will not be asked for a verification code on logon.</p>
							<p class="twoStepUntrusted">This device has not been marked as trusted, so you will be asked for a verification code on logon.</p>
							<div class="prefsh">Disable two-step</div>
							<p>To disable two-step verification generate a passcode from the app on your mobile device and enter it below:</p>
							<form id="twostep-disable-f" class="form-inline">
								<div class="input-group">
									<div class="input-group-addon"><span class="fas fa-key"></span></div>
									<input type="text" class="form-control" id="twostep-disable-i" name="token">
								</div>
								<div class="form-group">
									<button class="btn btn-primary" type="submit">Verify</button>
								</div>
							</form>
						</div>
						<div class="twoStepDisabled">
							<div style="font-size: 1.5em; margin-left: 25px;" class="pull-right label label-warning">
							<span class="fas fa-fw fa-2x fa-times"></span> <div class="btn-label">Disabled</div>
							</div>
							<div class="prefshS">Status</div>
							<p>Your account is not protected by two-step verification. If an attacker were to obtain
							your password they could use your account to make malicious changes, or simply download
							files they should not have access to. </p>
							<div class="prefsh">Enable two-step</div>
							<p>To use two-step verification you must first install an application on your smart phone 
							or similar mobile device. We recommend FreeOTP for 
							<a href="https://itunes.apple.com/gb/app/freeotp-authenticator/id872559395?mt=8">iPhone</a> or 
							<a href="https://play.google.com/store/apps/details?id=org.fedorahosted.freeotp">Android</a>.
							</p>
							<p>Once installed open the application add a new site and scan the following image:</p>
							<p><img id="qrcode" src="{{ url_for('totp_qrcode_view') }}"></p>

							<p>Once scanned you should see an entry for "{{ config['TOTP_IDENT'] }}" with a six digit number displayed. Enter it below to enable two step verification.</p>
							<form id="twostep-enable-f" class="form-inline">
								<div class="input-group">
									<div class="input-group-addon"><span class="fas fa-key"></span></div>
									<input type="text" class="form-control" id="twostep-enable-i" name="token">
								</div>
								<div class="form-group">
									<button class="btn btn-primary" type="submit">Verify</button>
								</div>
							</form>
						</div>
					</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
